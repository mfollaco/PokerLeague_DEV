<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chip & A Chair Poker League – Analytics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />

  <!-- Vegas Theme -->
  <link rel="stylesheet" href="css/vegas.css" />
</head>

<body class="bg-vegas text-light">

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-vegas-dark border-bottom border-gold">
    <div class="container">
      <a class="navbar-brand neon-gold" href="index.html">♠ Home ♣</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navMain">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="leaderboard.html">Leaderboard</a></li>
          <li class="nav-item"><a class="nav-link" href="schedule.html">Schedule</a></li>
          <li class="nav-item"><a class="nav-link active" href="analytics.html">Analytics</a></li>
          <li class="nav-item"><a class="nav-link" href="weekly-points.html">Weekly Points</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="py-5">
    <div class="container">
      <h1 class="neon-subtitle mb-4">Spring Season 2026 Analytics</h1>

      <!-- Wins -->
      <div class="card card-vegas mb-4 p-3">
        <h4 class="text-gold mb-3">Wins by Player</h4>
        <div id="wins-body" class="text-muted">Loading wins…</div>
      </div>

      <!-- Finish Distribution -->
      <div class="card card-vegas mb-4 p-3">
        <h4 class="text-gold mb-3">Finish Distribution</h4>
        <div id="finish-body" class="text-muted">Loading finish distribution…</div>
      </div>

      <!-- Chip and a Chair -->
      <div class="card card-vegas mb-4 p-3">
        <h4 class="text-gold mb-3">Chip &amp; A Chair Tournament Stacks</h4>
        <div id="cac-body" class="text-muted">Loading chip-and-a-chair stats…</div>
      </div>

      <!-- Survival Stats -->
      <div class="card card-vegas mb-4 p-3">
        <h4 class="text-gold mb-3">Survival Stats</h4>
        <div id="survival-body" class="text-muted">Loading survival stats…</div>
      </div>

    </div>
  </main>

  <!-- FOOTER -->
  <footer class="py-4 border-top border-gold mt-auto bg-vegas-dark">
    <div class="container text-center small text-muted-vegas">
      ♠ ♥ ♦ ♣ Chip & A Chair Analytics • Spring Season 2026 ♣ ♦ ♥ ♠
    </div>
  </footer>

  <!-- DATA LOADER -->
  <script>
    async function loadAnalytics() {
      try {
        const res = await fetch("spring_2026.json")
        const data = await res.json();

        // Wins
        const winsEl = document.getElementById('wins-body');
        if (data.wins) {
          winsEl.innerHTML = `
            <ul>
              ${data.wins.map(w => `
                <li><span class="text-gold">${w.player}</span>: ${w.count} wins</li>
              `).join('')}
            </ul>
          `;
        }

        // Finish distribution
        const finishEl = document.getElementById('finish-body');
        if (data.finish_distribution) {
          finishEl.innerHTML = `
            <ul>
              ${data.finish_distribution.map(f => `
                <li><span class="text-gold">${f.player}</span>: ${f.finishes.join(', ')}</li>
              `).join('')}
            </ul>
          `;
        }

        // Chip and a Chair
        const cacEl = document.getElementById('cac-body');
        if (data.chip_and_chair) {
          cacEl.innerHTML = `
            <ul>
              ${data.chip_and_chair.map(c => `
                <li><span class="text-gold">${c.player}</span>: ${c.count} times</li>
              `).join('')}
            </ul>
          `;
        }

        // Survival
        const survivalEl = document.getElementById('survival-body');
        if (data.survival) {
          survivalEl.innerHTML = `
            <ul>
              ${data.survival.map(s => `
                <li><span class="text-gold">${s.player}</span>: survived ${s.minutes} minutes</li>
              `).join('')}
            </ul>
          `;
        }

      } catch (err) {
        console.error(err);
      }
    }

    loadAnalytics();
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
